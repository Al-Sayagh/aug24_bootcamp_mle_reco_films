# Partir d'une image Python légère
FROM python:3.9-slim

# Installer les dépendances
RUN pip install mlflow psycopg2-binary

# Définir le répertoire de travail
WORKDIR /mlflow

# Démarrer le serveur MLflow
CMD ["mlflow", "server", "--backend-store-uri", "postgresql://airflow:airflow@postgres/airflow", "--default-artifact-root", "/mlartifacts", "--host", "0.0.0.0", "--port", "8081"]